<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Sales - Leia</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9fafb;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            flex-direction: column;
        }
        .card {
            background-color: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 600px;
        }
        h1 {
            color: #111827;
            margin-bottom: 10px;
        }
        p {
            color: #4b5563;
        }
        a.bookmarklet {
            display: inline-block;
            margin-top: 20px;
            background-color: #2563eb;
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        a.bookmarklet:hover {
            background-color: #1d4ed8;
        }
        .instructions {
            margin-top: 20px;
            font-size: 14px;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>Instalar Bookmarklet</h1>
        <p>Arraste o botão abaixo para sua barra de favoritos.</p>
        <a class="bookmarket" href="javascript:(function(){
    const e=document.createElement('div');
    e.style.position='fixed';
    e.style.top='0';
    e.style.left='0';
    e.style.width='100vw';
    e.style.height='100vh';
    e.style.backgroundColor='white';
    e.style.zIndex='999999';
    e.style.pointerEvents='none';
    document.body.appendChild(e);
    setTimeout(()=>{
        document.body.removeChild(e);
        let t_toast_el = null; // Variable to hold the single toast element
        function t(msg){ /* Função original do toast */
            msg = msg || '✅ Página recarregada!';
            if (t_toast_el) { // If a toast already exists, update its message
                t_toast_el.innerText = msg;
                t_toast_el.style.opacity = '1'; // Ensure it's visible if it was fading
                clearTimeout(t_toast_el.fadeTimeout); // Clear any existing fade-out timeout
            } else {
                t_toast_el = document.createElement('div');
                t_toast_el.style.position = 'fixed';
                t_toast_el.style.top = '20px';
                t_toast_el.style.right = '20px';
                t_toast_el.style.background = '#d1fae5';
                t_toast_el.style.color = '#065f46';
                t_toast_el.style.padding = '12px 18px';
                t_toast_el.style.borderRadius = '12px';
                t_toast_el.style.boxShadow = '0px 4px 12px rgba(0,0,0,0.1)';
                t_toast_el.style.fontFamily = '&quot;Open Sans&quot;, sans-serif';
                t_toast_el.style.fontSize = '14px';
                t_toast_el.style.zIndex = '99999';
                t_toast_el.style.border = '1px solid #a7f3d0';
                t_toast_el.style.transition = 'opacity 0.5s ease';
                t_toast_el.innerText = msg;
                document.body.appendChild(t_toast_el);
            }
            t_toast_el.fadeTimeout = setTimeout(()=>{
                t_toast_el.style.opacity = '0';
                setTimeout(()=> {
                    if (t_toast_el && t_toast_el.parentNode) { // Check if it still exists before removing
                        t_toast_el.remove();
                        t_toast_el = null; // Reset the reference
                    }
                }, 500);
            }, 3500);
        }
        t(); /* Chama a função de toast inicial */
    
        /* === MODIFICAÇÕES PARA O PAINEL DE LOG (agora é um toast para logs) === */
        const o = true; /* Habilita os logs na função r(msg) */
        let n_log_toast = null; /* Variável para segurar o elemento único de log */
        function r(msg){ /* Função r(msg), agora atua como um toast para logs */
            if(o){
                const displayMsg = '[' + new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' }) + '] ' + msg;
                if (n_log_toast) {
                    n_log_toast.innerText = displayMsg;
                    n_log_toast.style.opacity = '1';
                    clearTimeout(n_log_toast.fadeTimeout);
                } else {
                    n_log_toast = document.createElement('div');
                    n_log_toast.style.position = 'fixed';
                    n_log_toast.style.bottom = '20px'; /* Posição inferior */
                    n_log_toast.style.right = '20px';
                    n_log_toast.style.background = '#d1fae5';
                    n_log_toast.style.color = '#065f46';
                    n_log_toast.style.padding = '12px 18px';
                    n_log_toast.style.borderRadius = '12px';
                    n_log_toast.style.boxShadow = '0px 4px 12px rgba(0,0,0,0.1)';
                    n_log_toast.style.fontFamily = '&quot;Open Sans&quot;, sans-serif';
                    n_log_toast.style.fontSize = '14px';
                    n_log_toast.style.zIndex = '99998';
                    n_log_toast.style.border = '1px solid #a7f3d0';
                    n_log_toast.style.transition = 'opacity 0.5s ease';
                    n_log_toast.innerText = displayMsg;
                    document.body.appendChild(n_log_toast);
                }
                n_log_toast.fadeTimeout = setTimeout(()=>{
                    n_log_toast.style.opacity = '0';
                    setTimeout(()=> {
                        if (n_log_toast && n_log_toast.parentNode) {
                            n_log_toast.remove();
                            n_log_toast = null;
                        }
                    }, 500);
                }, 3500);
            }
        }
        /* === FIM DAS MODIFICAÇÕES PARA O PAINEL DE LOG === */
    
        function i(label){
            const btn = document.querySelector(&quot;button[aria-label='&quot;+label+&quot;']&quot;);
            if(btn && typeof btn.click === 'function' && !btn.disabled && btn.offsetParent !== null){
                btn.click();
                return true;
            }
            return false;
        }
    
        function a(label='Continuar'){
            return new Promise(resolve => {
                const observer = new MutationObserver(()=>{
                    const btn = document.querySelector(&quot;button[aria-label='&quot;+label+&quot;']&quot;);
                    if(btn){
                        const clickHandler = ()=>{
                            btn.removeEventListener('click', clickHandler);
                            observer.disconnect();
                            resolve();
                        };
                        btn.addEventListener('click', clickHandler);
                    }
                });
                observer.observe(document.body, {childList:true, subtree:true});
                const btnNow = document.querySelector(&quot;button[aria-label='&quot;+label+&quot;']&quot;);
                if(btnNow){
                    btnNow.addEventListener('click', ()=>{
                        btnNow.removeEventListener('click', arguments.callee);
                        observer.disconnect();
                        resolve();
                    });
                }
            });
        }
    
        async function c(seconds){
            for(let t_loop=seconds; t_loop>0; t_loop--){ /* Variável de loop 't' renomeada para 't_loop' para clareza */
                r('✅ Aguardando '+t_loop+'s...');
                await new Promise(r_promise => setTimeout(r_promise, 1000)); /* Parâmetro 'r' da Promise renomeado */
            }
        }
    
        async function d(){
            await a(); /* Espera o primeiro clique em 'Continuar' se houver */
            r('🚀 Script iniciado após clique manual!');
            let e_loop = true; /* Variável 'e' renomeada para 'e_loop' para clareza */
            while(e_loop){
                r('⏸️ Tentando pausar...');
                const paused = i('Pausar');
                if(paused){
                    await new Promise(r_promise => setTimeout(r_promise, 1000)); /* Parâmetro 'r' da Promise renomeado */
                    r('▶️ Tentando continuar...');
                    const continued = i('Continuar');
                    if(continued){
                        await c(20);
                    } else {
                        r('⚠️ Botão Continuar indisponível. Tentando em 5s...');
                        await c(5);
                    }
                } else {
                    r('⚠️ Botão Pausar indisponível. Tentando em 5s...');
                    await c(5);
                }
            }
        }
        d();
    }, 1000);
})();">Script Arvore</a>


        <div class="instructions">
            👉 Se não vê a barra de favoritos, ative ela no navegador (Ctrl+Shift+B).
        </div>
    </div>
</body>
</html>
